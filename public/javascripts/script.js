// Generated by CoffeeScript 1.12.7
(function() {
  $(document).ready(function() {
    'use strict';
    var after, before, imagesTotal, load, loaded, navActive, navToggle, prepAnimations, segment, setAside;
    prepAnimations = function() {
      $('body').addClass('no-transitions');
      $('#globalnav').css('width', '0%');
      $('#index .corners').css({
        'opacity': 0,
        'left': '-150px'
      });
      $('#index .text-container h6').css({
        'opacity': 0,
        'letter-spacing': '30px'
      });
    };
    prepAnimations();
    navActive = null;
    navToggle = function() {
      $('#globalnav .navtoggle .default, #globalnav .navtoggle .back').toggleClass('disable');
      if (!navActive) {
        $('#globalnav').css('width', '100%');
        $('#globalnav .navtoggle .default').css('left', '-50px');
        $('#globalnav .navtoggle .back').css('left', '0px');
        $('#globalnav .buttonContainer').fadeIn();
      } else {
        $('#globalnav').css('width', '0%');
        $('#globalnav .navtoggle .default').css('left', '');
        $('#globalnav .navtoggle .back').css('left', '');
        $('#globalnav .buttonContainer').fadeOut();
      }
      navActive = !navActive;
    };
    setAside = function() {
      var displayImg, i, img;
      displayImg = $('#display img');
      i = 0;
      while (i < displayImg.length) {
        img = $(displayImg[i]);
        img.next('aside').css('height', img.height());
        img.next('aside').css('width', img.width());
        i++;
      }
    };
    load = function() {
      $('body').removeClass('no-transitions');
      $('body').css('overflow-y', 'auto');
      $('#loader').css({
        'opacity': 0,
        'pointer-events': 'none'
      });
      setTimeout((function() {
        $('#loader').remove();
        $('#index .corners').css({
          'opacity': '',
          'left': ''
        });
        setTimeout((function() {
          return $('#index .text-container h6').css({
            'opacity': 1,
            'letter-spacing': ''
          });
        }), 750);
      }), 750);
      setAside();
    };
    imagesTotal = $('img').length;
    segment = 100 / imagesTotal;
    loaded = 0;
    before = 0;
    after = 0;
    $(document).imagesLoaded().progress(function(instance, image) {
      var animateText;
      animateText = function(from, to) {
        $({
          current: from
        }).animate({
          current: to
        }, {
          duration: segment / 0.35 * 10,
          step: function() {
            $('.progress-text p').text(this.current.toFixed(2));
          }
        });
      };
      if (image.isLoaded) {
        before = loaded;
        loaded += segment;
        after = loaded;
        animateText(before, after);
        $('#loader .progress-bar').css('width', loaded + '%');
      } else {
        $('.failed').append('<p>Fail to load: ' + image.img.src + '</p>');
      }
    }).done(function() {
      load();
    });
    $(window).resize(function() {
      setAside();
    });
    $('nav a').click(function(event) {});
    $('.navtoggle').click(function() {
      navToggle();
    });
    $('#latest, #featured, #upcoming').hover(function() {
      $(this).find('img').css('transform', 'scale(1.02)');
      return $(this).find('.info').css('opacity', '1');
    }, function() {
      $(this).find('img').css('transform', '');
      return $(this).find('.info').css('opacity', '');
    });
    $('#portfolio .item a').hover(function() {
      $(this).find('img').css('transform', 'scale(1.02)');
      return $(this).find('aside').css('opacity', '1');
    }, function() {
      $(this).find('img').css('transform', '');
      return $(this).find('aside').css('opacity', '');
    });
    $('.slide img').click(function() {
      var main;
      main = $('#main-img');
      main.attr('src', $(this).attr('src'));
      $('.img-loader').show();
      main.css('opacity', 0);
      main.imagesLoaded().done(function() {
        main.css('opacity', 1);
        $('.img-loader').hide();
      });
    });
  });

}).call(this);
